<div class="row w-100 m-0 p-0">

    <div class="d-flex gap-2 mb-3">
        <input class="form-control w-50" type="text" id="search" (keyup)="search()">
    </div>

    <div class="d-flex justify-content-between m-0 p-0">
        <div class="fw-semibold fs-5 d-flex align-items-center">Tasks</div>
        <a class="btn btn-success text-white" [routerLink]="['/create-task']">Create a task</a>
    </div>

    <div class="row w-100 m-0 p-0">
        <ngx-datatable class="bootstrap p-0 m-0"
                       [scrollbarH]="true"
                       [columnMode]="'flex'"
                       [rowHeight]="60"
                       [rows]="tasks">

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="id"
                                  name="Id">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.id}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="name"
                                  name="Project name">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.name}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="status"
                                  name="Status">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.status}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="deliveryDate"
                                  name="Delivery date">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.deliveryDate | date:'dd.MM.YY, HH:mm':'UTC+3'}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="finishDate"
                                  name="Finish date">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.finishDate | date:'dd.MM.YY, HH:mm':'UTC+3'}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="firstName"
                                  name="Employee">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.employee.firstName + ' ' + row.employee.lastName}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [canAutoResize]="false"
                                  prop="name"
                                  name="Project">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{row.project.name}}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [sortable]="false"
                                  [minWidth]="350"
                                  name="Actions">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <div class="h-100 d-flex justify-content-center gap-2 align-items-center">
                        <button type="button"
                                (click)="deleteProject(row.id)"
                                class="btn btn-danger gap-2">Delete
                        </button>
                        <button [routerLink]="['/update-task', row.id]"
                                class="btn btn-success">Update
                        </button>
                        <button (click)="finish(row.id)"
                                class="btn btn-success">Finish
                        </button>
                    </div>
                </ng-template>
            </ngx-datatable-column>

        </ngx-datatable>
    </div>
</div>
